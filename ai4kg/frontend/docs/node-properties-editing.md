# 节点属性面板编辑功能

## 新增功能

### 节点属性编辑
- ✅ 支持在线编辑节点的基本属性（标签、类型、坐标、大小、颜色）
- ✅ 支持编辑自定义属性
- ✅ 支持添加新的自定义属性
- ✅ 支持删除自定义属性
- ✅ 编辑状态管理（编辑/保存/取消）
- ✅ 输入验证（必填字段验证）
- ✅ 保存状态指示器
- ✅ 错误处理和用户提示

### 节点删除功能
- ✅ 支持删除节点
- ✅ 删除确认对话框
- ✅ 自动删除相关边
- ✅ 实时更新图谱显示

### 实时数据同步
- ✅ 使用React Query进行数据缓存管理
- ✅ 乐观更新UI状态
- ✅ 自动同步节点更新到图谱显示
- ✅ 节点切换时自动重置编辑状态

## 使用方法

1. 在图谱中点击任意节点
2. 右侧属性面板显示节点详细信息
3. 点击"编辑"按钮进入编辑模式
4. 修改节点属性：
   - 标签和类型：直接在输入框中编辑
   - 坐标和大小：使用数字输入框
   - 颜色：使用颜色选择器或手动输入HEX值
   - 自定义属性：直接编辑现有属性值
5. 添加新属性：
   - 在底部输入属性名和值
   - 点击"+"按钮添加
6. 删除属性：点击属性旁边的"×"按钮
7. 保存更改：点击"保存"按钮
8. 取消编辑：点击"取消"按钮

## 技术实现

### 组件结构
- `NodePropertiesPanel.tsx` - 主要的属性面板组件
- 状态管理：使用React useState和useEffect
- 数据同步：使用React Query的queryClient.setQueryData

### API调用
- `nodesApi.updateNode()` - 更新节点属性
- `nodesApi.deleteNode()` - 删除节点

### 数据验证
- 标签和类型字段必填验证
- 数字类型字段自动转换
- 颜色值格式验证

### 错误处理
- API调用失败时的错误提示
- 网络异常处理
- 用户友好的错误消息

## 文件更改

1. **NodePropertiesPanel.tsx** - 完全重构以支持编辑功能
2. **GraphViewPage.tsx** - 添加节点更新和删除的回调处理
3. 新增依赖：无（使用现有的UI组件和API）

## 待优化项

- [ ] 添加撤销/重做功能
- [ ] 批量编辑多个节点
- [ ] 属性类型验证（数字、字符串、布尔值等）
- [ ] 自定义属性的类型选择器
- [ ] 更好的错误提示UI（Toast/Alert组件）
- [ ] 编辑历史记录
- [ ] 快捷键支持
